{{- /* GA4 only. Read from .Site.Params.googleAnalytics; do nothing if unset. */ -}}
{{- $id := "" -}}
{{- with site.Params.googleAnalytics }}{{ $id = . }}{{ end -}}
{{- if and $id (hasPrefix $id "G-") -}}
  <!-- Google tag (gtag.js) for GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ $id }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ $id }}');
  </script>
{{- else -}}
  <!-- No GA injected -->
{{- end -}}
